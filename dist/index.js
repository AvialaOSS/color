(function(d,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("color")):typeof define=="function"&&define.amd?define(["exports","color"],g):(d=typeof globalThis<"u"?globalThis:d||self,g(d.AvialaColor={},d.Color))})(this,function(d,g){"use strict";function k(e){return g(e).rgb().round().color.join(",")}const G=["hex","rgb","hsl"];function O(e){return!e||G.indexOf(e)<0?"hex":e}function E(e,o){const s=O(o);return s==="hex"?e[s]().toLowerCase():e[s]().round().string()}function L(e,o,s){const n=g(e),t=n.hue(),r=n.saturationv(),a=n.value(),c=(M=>M>=60&&M<=240?2.5:M>=0&&M<60||M>300&&M<=360?1.5:2)(t),u=100,f=9,l=100,h=30;function m(M,y){let p;return t>=60&&t<=240?p=M?t-c*y:t+c*y:p=M?t+c*y:t-c*y,p<0?p+=360:p>=360&&(p-=360),Math.round(p)}function b(M,y){let p;if(M)p=r<=f?r:r-(r-f)/5.5*Math.pow(y,1.05);else{const _=Math.min(u,r+30);p=r+(_-r)/4.2*Math.pow(y,.95)}return Math.max(0,Math.min(100,p))}function S(M,y){return M?Math.min(l,a+(l-a)/5.2*Math.pow(y,.9)):a<=h?a:Math.max(h,a-(a-h)/4.2*Math.pow(y,1.05))}const w=o<6,x=w?6-o:o-6,D=o===6?n:g({h:m(w,x),s:b(w,x),v:S(w,x)});return E(D,s)}function P(e,o,s){const n=g(L(e,10-o+1)),t=g(e),r=t.hue(),a=t.saturationv(),c=g({h:t.hue(),s:l(6),v:t.value()}).saturationv(),u=Math.ceil((c-9)/4),f=Math.ceil((100-c)/5);function l(m){if(m<6)return c+(6-m)*f;if(m===6){if(r>=0&&r<50)return a-15;if(r>=50&&r<191)return a-20;if(r>=191&&r<=360)return a-15}return c-u*(m-6)}const h=g({h:n.hue(),s:l(o),v:n.value()});return E(h,s)}function v(e,o={}){const{dark:s,list:n,index:t=6,format:r="hex"}=o;if(n){const a=[],i=s?P:L;for(let c=1;c<=10;c++)a.push(i(e,c,r));return a}return s?P(e,t,r):L(e,t,r)}async function $(e){try{const o=await q(e),s=N(o);return j(s)}catch(o){throw console.error("提取图片颜色失败:",o),o}}async function q(e){return new Promise((o,s)=>{try{const n=document.createElement("canvas"),t=n.getContext("2d"),r=Math.min(e.width,100),a=Math.min(e.height,100),i=Math.min(r/e.width,a/e.height);n.width=e.width*i,n.height=e.height*i,t.drawImage(e,0,0,n.width,n.height);const c=t.getImageData(0,0,n.width,n.height);o(c)}catch(n){s(n)}})}function N(e){const o=e.data,s=new Map;for(let t=0;t<o.length;t+=4){const r=o[t],a=o[t+1],i=o[t+2];if(o[t+3]<128)continue;const u=Math.round(r/16)*16,f=Math.round(a/16)*16,l=Math.round(i/16)*16,h=`${u},${f},${l}`;s.has(h)?s.set(h,s.get(h)+1):s.set(h,1)}const n=[];return s.forEach((t,r)=>{const[a,i,c]=r.split(",").map(Number);n.push({r:a,g:i,b:c,count:t})}),n}function j(e){e.sort((t,r)=>r.count-t.count);const o=e.filter(t=>{const{r,g:a,b:i}=t,c=Math.max(r,a,i),u=Math.min(r,a,i),f=c-u,l=c===0?0:f/c,h=c/255;return l>.15&&h>.2&&h<.8}),s=o.length>0?o[0]:e[0];return g({r:s.r,g:s.g,b:s.b}).hex()}function U(e){return new Promise((o,s)=>{if(!e.type.startsWith("image/")){s(new Error("请选择图片文件"));return}const n=new FileReader;n.onload=async t=>{try{const r=new Image;r.onload=async()=>{try{const a=await $(r);o(a)}catch(a){s(a)}},r.onerror=()=>s(new Error("图片加载失败")),r.src=t.target.result}catch(r){s(r)}},n.onerror=()=>s(new Error("文件读取失败")),n.readAsDataURL(e)})}function I(e,o,s={}){const{steps:n=10,format:t="hex",includeEnds:r=!0}=s;if(n<2)throw new Error("步数必须至少为2");const a=g(e),i=g(o),c=[],u=r?n:n+2,f=1/(u-1);for(let l=0;l<u;l++){const h=l*f,m=Math.round(a.red()+(i.red()-a.red())*h),b=Math.round(a.green()+(i.green()-a.green())*h),S=Math.round(a.blue()+(i.blue()-a.blue())*h),w=g({r:m,g:b,b:S});!r&&(l===0||l===u-1)||c.push(E(w,t))}return c}function K(e={}){const{startGray:o="#ffffff",endGray:s="#000000",steps:n=10,format:t="hex"}=e;return I(o,s,{steps:n,format:t,includeEnds:!0})}function W(e,o={}){const{steps:s=10,format:n="hex",lightnessRange:t=80}=o,a=g(e).hsl(),i=a.lightness(),c=Math.min(95,i+t/2),u=Math.max(5,i-t/2),f=g({h:a.hue(),s:a.saturationl(),l:c}),l=g({h:a.hue(),s:a.saturationl(),l:u});return I(f.hex(),l.hex(),{steps:s,format:n,includeEnds:!0})}function J(e,o,s={}){const{steps:n=10,format:t="hex",includeEnds:r=!0}=s;if(n<2)throw new Error("步数必须至少为2");const a=g(e).hsl(),i=g(o).hsl(),c=[],u=r?n:n+2,f=1/(u-1);let l=a.hue()||0,h=i.hue()||0;const m=h-l;Math.abs(m)>180&&(m>0?l+=360:h+=360);for(let b=0;b<u;b++){const S=b*f;let w=l+(h-l)*S;const x=a.saturationl()+(i.saturationl()-a.saturationl())*S,D=a.lightness()+(i.lightness()-a.lightness())*S;w=w%360,w<0&&(w+=360);const M=g({h:w,s:x,l:D});!r&&(b===0||b===u-1)||c.push(E(M,t))}return c}function C(e){const o=e.replace("#",""),s=parseInt(o.substr(0,2),16)/255,n=parseInt(o.substr(2,2),16)/255,t=parseInt(o.substr(4,2),16)/255,r=Math.max(s,n,t),a=Math.min(s,n,t),i=r-a;let c=0;i!==0&&(r===s?c=(n-t)/i%6:r===n?c=(t-s)/i+2:c=(s-n)/i+4),c=Math.round(c*60),c<0&&(c+=360);const u=Math.round((.299*s+.587*n+.114*t)*100),f=(r+a)/2,l=i===0?0:i/(1-Math.abs(2*f-1)),h=Math.round(l*Math.min(u,100-u));return{h:c,c:h,t:u}}function H(e){const{h:o,c:s,t:n}=e,t=(o%360+360)%360,r=Math.max(0,Math.min(150,s)),a=Math.max(0,Math.min(100,n)),i=a/100,c=a===0||a===100?0:r/Math.min(a,100-a),u=(1-Math.abs(2*i-1))*Math.min(1,c),f=u*(1-Math.abs(t/60%2-1)),l=i-u/2;let h,m,b;t>=0&&t<60?[h,m,b]=[u,f,0]:t>=60&&t<120?[h,m,b]=[f,u,0]:t>=120&&t<180?[h,m,b]=[0,u,f]:t>=180&&t<240?[h,m,b]=[0,f,u]:t>=240&&t<300?[h,m,b]=[f,0,u]:[h,m,b]=[u,0,f];const S=w=>{const x=Math.max(0,Math.min(1,w+l)),D=Math.round(x*255).toString(16);return D.length===1?"0"+D:D};return`#${S(h)}${S(m)}${S(b)}`}function R(e,o,s=.5){const n=C(e),t=C(o);let r=n.h,a=t.h,i=a-r;Math.abs(i)>180&&(i>0?r+=360:a+=360);const c=(r+(a-r)*s)%360,u=n.c+(t.c-n.c)*s,f=n.t+(t.t-n.t)*s;return H({h:c<0?c+360:c,c:Math.max(0,Math.round(u)),t:Math.max(0,Math.min(100,Math.round(f)))})}function Q(e,o,s=.15){const n=C(e),t=C(o);let r=t.h,a=n.h,i=a-r;Math.abs(i)>180&&(i>0?r+=360:a+=360,i=a-r);const c=(r+i*s)%360;return H({h:c<0?c+360:c,c:t.c,t:t.t})}function A(e,o=[10,20,30,40,50,60,70,80,90]){const s=C(e);let n;return Array.isArray(o)?n=o:o&&o.tones&&Array.isArray(o.tones)?n=o.tones:n=[10,20,30,40,50,60,70,80,90],n.map(t=>H({h:s.h,c:s.c,t}))}function z(e,o,s=.2){const n={};for(const[t,r]of Object.entries(o))n[t]=R(e,r,s);return n}function B(e,o={}){const{baseGray:s="#666666"}=o,{blendRatio:n=.08,isDark:t=!1}=o,r=C(s),a={};return(t?[95,90,85,80,70,60,50,40,30,20,15,10]:[10,15,20,30,40,50,60,70,80,85,90,95]).forEach((c,u)=>{const f={h:r.h,c:r.c,t:c},l=R(H(f),e,n);a[`gray-${u+1}`]=l}),a}function T(e,o={}){const{semanticColors:s={success:"#52c41a",warning:"#faad14",error:"#ff4d4f",info:"#1890ff"},blendRatio:n=.12,isDark:t=!1}=o,r={};return Object.entries(s).forEach(([a,i])=>{const c={},u=C(i);(t?[90,80,70,60,50,40,30,25,20,15]:[15,25,35,45,55,65,75,85,90,95]).forEach((l,h)=>{const m={h:u.h,c:u.c,t:l},b=R(H(m),e,n);c[`${a}-${h+1}`]=b}),Object.assign(r,c)}),r}function V(e,o={}){const{isDark:s=!1}=o,n=C(e),t={};return(s?[90,80,70,60,50,40,30,25,20,15]:[15,25,35,45,55,65,75,85,90,95]).forEach((a,i)=>{const c={h:n.h,c:n.c,t:a};t[`theme-${i+1}`]=H(c)}),t}function X(e,o={}){const{baseGray:s="#666666",isDark:n=!1,semanticColors:t,controlBlendRatio:r=.08,semanticBlendRatio:a=.12}=o;return{controls:B(e,{baseGray:s,blendRatio:r,isDark:n}),semantic:T(e,{semanticColors:t,blendRatio:a,isDark:n}),theme:V(e,{isDark:n})}}function Y(e,o={}){const{semanticColors:s={success:"#52c41a",warning:"#faad14",error:"#ff4d4f",info:"#1890ff"},uiColors:n={background:"#ffffff",surface:"#fafafa",border:"#d9d9d9",disabled:"#f5f5f5"},harmonizeRatio:t=.15,blendRatio:r=.12,generateVariants:a=!0}=o,i=T(e,{semanticColors:s,blendRatio:t}),c={};Object.entries(s).forEach(([f])=>{c[f]={};for(let l=1;l<=10;l++){const h=`${f}-${l}`;i[h]&&(c[f][l]=i[h])}});const u={theme:e,semantic:c,ui:z(e,n,r)};return a&&(u.variants=A(e)),u}const F={red:"#F53F3F",orangered:"#F77234",orange:"#FF7D00",gold:"#F7BA1E",yellow:"#FADC19",lime:"#9FDB1D",green:"#00B42A",cyan:"#14C9C9",blue:"#3491FA",arcoblue:"#165DFF",purple:"#722ED1",pinkpurple:"#D91AD9",magenta:"#F5319D"};function Z(){const e={};return Object.keys(F).forEach(o=>{e[o]={},e[o].light=v(F[o],{list:!0}),e[o].dark=v(F[o],{list:!0,dark:!0}),e[o].primary=F[o]}),e.gray={},e.gray.light=["#f7f8fa","#f2f3f5","#e5e6eb","#c9cdd4","#a9aeb8","#86909c","#6b7785","#4e5969","#272e3b","#1d2129"],e.gray.dark=["#17171a","#2e2e30","#484849","#5f5f60","#78787a","#929293","#ababac","#c5c5c5","#dfdfdf","#f6f6f6"],e.gray.primary=e.gray.light[6],e}d.blendInHct=R,d.blendUIColors=z,d.colorList=F,d.extractColorFromFile=U,d.extractColorFromImage=$,d.generate=v,d.generateControlColors=B,d.generateGrayLinear=K,d.generateInterfaceColorSystem=X,d.generateLinear=I,d.generateLinearHSL=J,d.generateMonochromeLinear=W,d.generateSemanticColors=T,d.generateThemeColors=V,d.generateThemePalette=Y,d.generateThemeVariants=A,d.getPresetColors=Z,d.getRgbStr=k,d.harmonizeColor=Q,d.hctToRgb=H,d.rgbToHct=C,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
